{"version":3,"sources":["../../../src/framework/test_filter/filter_by_group.ts"],"names":["FilterByGroup","constructor","suite","groupPrefix","matches","spec","testcase","Error","iterate","loader","specs","listing","entries","path","description","startsWith","isReadme","endsWith","import","push","id"],"mappings":";;;;;;AAMA,OAAO,MAAMA,aAAN,CAA0C;AAI/CC,EAAAA,WAAW,CAACC,KAAD,EAAgBC,WAAhB,EAAqC;AAAA;;AAAA;;AAC9C,SAAKD,KAAL,GAAaA,KAAb;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACD;;AAEDC,EAAAA,OAAO,CAACC,IAAD,EAAmBC,QAAnB,EAAkD;AACvD,UAAM,IAAIC,KAAJ,CAAU,eAAV,CAAN;AACD;;AAED,QAAMC,OAAN,CAAcC,MAAd,EAAmE;AACjE,UAAMC,KAAK,GAAG,MAAMD,MAAM,CAACE,OAAP,CAAe,KAAKT,KAApB,CAApB;AACA,UAAMU,OAA2B,GAAG,EAApC;AAEA,UAAMV,KAAK,GAAG,KAAKA,KAAnB;;AACA,SAAK,MAAM;AAAEW,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAX,IAAoCJ,KAApC,EAA2C;AACzC,UAAIG,IAAI,CAACE,UAAL,CAAgB,KAAKZ,WAArB,CAAJ,EAAuC;AACrC,cAAMa,QAAQ,GAAGH,IAAI,KAAK,EAAT,IAAeA,IAAI,CAACI,QAAL,CAAc,GAAd,CAAhC;AACA,cAAMZ,IAAI,GAAGW,QAAQ,GAChB;AAAEF,UAAAA;AAAF,SADgB,GAEf,MAAML,MAAM,CAACS,MAAP,CAAe,GAAEhB,KAAM,IAAGW,IAAK,UAA/B,CAFZ;AAGAD,QAAAA,OAAO,CAACO,IAAR,CAAa;AAAEC,UAAAA,EAAE,EAAE;AAAElB,YAAAA,KAAF;AAASW,YAAAA;AAAT,WAAN;AAAuBR,UAAAA;AAAvB,SAAb;AACD;AACF;;AAED,WAAOO,OAAP;AACD;;AA7B8C","sourcesContent":["import { TestCaseID, TestSpecID } from '../id.js';\nimport { ReadmeFile, TestFileLoader, TestSpec } from '../loader.js';\n\nimport { TestFilterResult } from './index.js';\nimport { TestFilter } from './internal.js';\n\nexport class FilterByGroup implements TestFilter {\n  private readonly suite: string;\n  private readonly groupPrefix: string;\n\n  constructor(suite: string, groupPrefix: string) {\n    this.suite = suite;\n    this.groupPrefix = groupPrefix;\n  }\n\n  matches(spec: TestSpecID, testcase: TestCaseID): boolean {\n    throw new Error('unimplemented');\n  }\n\n  async iterate(loader: TestFileLoader): Promise<TestFilterResult[]> {\n    const specs = await loader.listing(this.suite);\n    const entries: TestFilterResult[] = [];\n\n    const suite = this.suite;\n    for (const { path, description } of specs) {\n      if (path.startsWith(this.groupPrefix)) {\n        const isReadme = path === '' || path.endsWith('/');\n        const spec = isReadme\n          ? ({ description } as ReadmeFile)\n          : ((await loader.import(`${suite}/${path}.spec.js`)) as TestSpec);\n        entries.push({ id: { suite, path }, spec });\n      }\n    }\n\n    return entries;\n  }\n}\n"],"file":"filter_by_group.js"}